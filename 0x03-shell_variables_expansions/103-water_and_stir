#!/bin/bash
awk -v w="$WATER" -v s="$STIR" 'BEGIN {mapw["w"]=0;mapw["a"]=1;mapw["t"]=2;mapw["e"]=3;mapw["r"]=4;maps["s"]=0;maps["t"]=1;maps["i"]=2;maps["r"]=3;maps["."]=4;base5_to_dec=function(str,map,len,i,n,c){n=0;for(i=1;i<=len;i++){c=substr(str,i,1);n=n*5+map[c]}return n};dec_to_custom_base=function(num,digits,base,res,r){res="";if(num==0)return substr(digits,1,1);while(num>0){r=(num%base)+1;res=substr(digits,r,1) res;num=int(num/base)}return res};nw=length(w);ns=length(s);dw=base5_to_dec(w,mapw,nw);ds=base5_to_dec(s,maps,ns);sum=dw+ds;print dec_to_custom_base(sum,"bestchol",8)}'
